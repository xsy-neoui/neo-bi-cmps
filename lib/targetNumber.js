/*! For license information please see targetNumber.js.LICENSE.txt */
!function(){if(!window.neoRequire)throw new Error("neoRequire 不存在，请在 NeoCRM 平台中加载此脚本。");!function(e){var t;t=function(){return function(){var t={887:function(e,t,r){var n=r(16993),o=r(11791);e.exports=function(e,t,r,i,a){return new o(n().w(e,t,r,i),a||Promise)},e.exports.__esModule=!0,e.exports.default=e.exports},4373:function(e){e.exports=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},e.exports.__esModule=!0,e.exports.default=e.exports},4633:function(e,t,r){var n=r(25172),o=r(16993),i=r(55869),a=r(887),u=r(11791),s=r(4373),l=r(30579);function c(){"use strict";var t=o(),r=t.m(c),f=(Object.getPrototypeOf?Object.getPrototypeOf(r):r.__proto__).constructor;function p(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))}var d={throw:1,return:2,break:3,continue:3};function v(e){var t,r;return function(n){t||(t={stop:function(){return r(n.a,2)},catch:function(){return n.v},abrupt:function(e,t){return r(n.a,d[e],t)},delegateYield:function(e,o,i){return t.resultName=o,r(n.d,l(e),i)},finish:function(e){return r(n.f,e)}},r=function(e,r,o){n.p=t.prev,n.n=t.next;try{return e(r,o)}finally{t.next=n.n}}),t.resultName&&(t[t.resultName]=n.v,t.resultName=void 0),t.sent=n.v,t.next=n.n;try{return e.call(this,t)}finally{n.p=t.prev,n.n=t.next}}}return(e.exports=c=function(){return{wrap:function(e,r,n,o){return t.w(v(e),r,n,o&&o.reverse())},isGeneratorFunction:p,mark:t.m,awrap:function(e,t){return new n(e,t)},AsyncIterator:u,async:function(e,t,r,n,o){return(p(t)?a:i)(v(e),t,r,n,o)},keys:s,values:l}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=c,e.exports.__esModule=!0,e.exports.default=e.exports},11791:function(e,t,r){var n=r(25172),o=r(75546);e.exports=function e(t,r){function i(e,o,a,u){try{var s=t[e](o),l=s.value;return l instanceof n?r.resolve(l.v).then(function(e){i("next",e,a,u)},function(e){i("throw",e,a,u)}):r.resolve(l).then(function(e){s.value=e,a(s)},function(e){return i("throw",e,a,u)})}catch(e){u(e)}}var a;this.next||(o(e.prototype),o(e.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),o(this,"_invoke",function(e,t,n){function o(){return new r(function(t,r){i(e,n,t,r)})}return a=a?a.then(o,o):o()},!0)},e.exports.__esModule=!0,e.exports.default=e.exports},16993:function(e,t,r){var n=r(75546);function o(){var t,r,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.toStringTag||"@@toStringTag";function s(e,o,i,a){var u=o&&o.prototype instanceof c?o:c,s=Object.create(u.prototype);return n(s,"_invoke",function(e,n,o){var i,a,u,s=0,c=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,r){return i=e,a=0,u=t,p.n=r,l}};function d(e,n){for(a=e,u=n,r=0;!f&&s&&!o&&r<c.length;r++){var o,i=c[r],d=p.p,v=i[2];e>3?(o=v===n)&&(u=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=t):i[0]<=d&&((o=e<2&&d<i[1])?(a=0,p.v=n,p.n=i[1]):d<v&&(o=e<3||i[0]>n||n>v)&&(i[4]=e,i[5]=n,p.n=v,a=0))}if(o||e>1)return l;throw f=!0,n}return function(o,c,v){if(s>1)throw TypeError("Generator is already running");for(f&&1===c&&d(c,v),a=c,u=v;(r=a<2?t:u)||!f;){i||(a?a<3?(a>1&&(p.n=-1),d(a,u)):p.n=u:p.v=u);try{if(s=2,i){if(a||(o="next"),r=i[o]){if(!(r=r.call(i,u)))throw TypeError("iterator result is not an object");if(!r.done)return r;u=r.value,a<2&&(a=0)}else 1===a&&(r=i.return)&&r.call(i),a<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=t}else if((r=(f=p.n<0)?u:e.call(n,p))!==l)break}catch(e){i=t,a=1,u=e}finally{s=1}}return{value:r,done:f}}}(e,i,a),!0),s}var l={};function c(){}function f(){}function p(){}r=Object.getPrototypeOf;var d=[][a]?r(r([][a]())):(n(r={},a,function(){return this}),r),v=p.prototype=c.prototype=Object.create(d);function y(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,n(e,u,"GeneratorFunction")),e.prototype=Object.create(v),e}return f.prototype=p,n(v,"constructor",p),n(p,"constructor",f),f.displayName="GeneratorFunction",n(p,u,"GeneratorFunction"),n(v),n(v,u,"Generator"),n(v,a,function(){return this}),n(v,"toString",function(){return"[object Generator]"}),(e.exports=o=function(){return{w:s,m:y}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},25172:function(e){e.exports=function(e,t){this.v=e,this.k=t},e.exports.__esModule=!0,e.exports.default=e.exports},25849:function(){},30579:function(e,t,r){var n=r(73738).default;e.exports=function(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}throw new TypeError(n(e)+" is not iterable")},e.exports.__esModule=!0,e.exports.default=e.exports},54112:function(e,t,r){var n=r(25849);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals),(0,r(70534).A)("1dc96abe",n,!1,{sourceMap:!1})},54756:function(e,t,r){var n=r(4633)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},55869:function(e,t,r){var n=r(887);e.exports=function(e,t,r,o,i){var a=n(e,t,r,o,i);return a.next().then(function(e){return e.done?e.value:a.next()})},e.exports.__esModule=!0,e.exports.default=e.exports},70534:function(e,t,r){"use strict";function n(e,t){for(var r=[],n={},o=0;o<t.length;o++){var i=t[o],a=i[0],u={id:e+":"+o,css:i[1],media:i[2],sourceMap:i[3]};n[a]?n[a].parts.push(u):r.push(n[a]={id:a,parts:[u]})}return r}r.d(t,{A:function(){return v}});var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},a=o&&(document.head||document.getElementsByTagName("head")[0]),u=null,s=0,l=!1,c=function(){},f=null,p="data-vue-ssr-id",d="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function v(e,t,r,o){l=r,f=o||{};var a=n(e,t);return y(a),function(t){for(var r=[],o=0;o<a.length;o++){var u=a[o];(s=i[u.id]).refs--,r.push(s)}for(t?y(a=n(e,t)):a=[],o=0;o<r.length;o++){var s;if(0===(s=r[o]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete i[s.id]}}}}function y(e){for(var t=0;t<e.length;t++){var r=e[t],n=i[r.id];if(n){n.refs++;for(var o=0;o<n.parts.length;o++)n.parts[o](r.parts[o]);for(;o<r.parts.length;o++)n.parts.push(h(r.parts[o]));n.parts.length>r.parts.length&&(n.parts.length=r.parts.length)}else{var a=[];for(o=0;o<r.parts.length;o++)a.push(h(r.parts[o]));i[r.id]={id:r.id,refs:1,parts:a}}}}function m(){var e=document.createElement("style");return e.type="text/css",a.appendChild(e),e}function h(e){var t,r,n=document.querySelector("style["+p+'~="'+e.id+'"]');if(n){if(l)return c;n.parentNode.removeChild(n)}if(d){var o=s++;n=u||(u=m()),t=x.bind(null,n,o,!1),r=x.bind(null,n,o,!0)}else n=m(),t=_.bind(null,n),r=function(){n.parentNode.removeChild(n)};return t(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;t(e=n)}else r()}}var b,g=(b=[],function(e,t){return b[e]=t,b.filter(Boolean).join("\n")});function x(e,t,r,n){var o=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=g(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function _(e,t){var r=t.css,n=t.media,o=t.sourceMap;if(n&&e.setAttribute("media",n),f.ssrId&&e.setAttribute(p,t.id),o&&(r+="\n/*# sourceURL="+o.sources[0]+" */",r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}},73738:function(e){function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},75546:function(e){function t(r,n,o,i){var a=Object.defineProperty;try{a({},"",{})}catch(r){a=0}e.exports=t=function(e,r,n,o){function i(r,n){t(e,r,function(e){return this._invoke(r,n,e)})}r?a?a(e,r,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[r]=n:(i("next",0),i("throw",1),i("return",2))},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n,o,i)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var i=r[e]={id:e,exports:{}};return t[e](i,i.exports,n),i.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return function(){"use strict";function t(){return t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},t.apply(null,arguments)}function r(e,t,r,n,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void r(e)}u.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var a=e.apply(t,n);function u(e){r(a,o,i,u,s,"next",e)}function s(e){r(a,o,i,u,s,"throw",e)}u(void 0)})}}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}n.r(o),n.d(o,{default:function(){return p}});var u=n(54756),s=n.n(u);Object.create,Object.create;var l=e("react"),c=e("neo-open-api"),f=e("neo-ui-common"),p=(n(54112),function(e){function r(t){var r;return(r=e.call(this,t)||this).state={recordData:{},targetNumbers:[],loading:!1,error:null},r.loadData=r.loadData.bind(r),r}var n,o;o=e,(n=r).prototype=Object.create(o.prototype),n.prototype.constructor=n,a(n,o);var u=r.prototype;return u.componentDidMount=function(){var e=this.props,t=e.entityApiKey,r=e.selectFieldDesc;t&&this.hasValidFieldDesc(r)&&this.loadData()},u.hasValidFieldDesc=function(e){return Array.isArray(e)},u.componentWillReceiveProps=function(e){var t=e.selectFieldDesc;t&&this.hasValidFieldDesc(t)&&this.getTargetNumbers(t)},u.componentDidUpdate=function(){var e=i(s().mark(function e(t){var r,n,o;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=this.props,n=r.entityApiKey,r.selectFieldDesc,o=t.entityApiKey,(null==n?void 0:n.xObjectApiKey)===(null==o?void 0:o.xObjectApiKey)&&(null==n?void 0:n.objectId)===(null==o?void 0:o.objectId)||(null!=n&&n.xObjectApiKey&&null!=n&&n.objectId?this.loadData():this.setState({recordData:{},targetNumbers:[],error:null}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),u.getTargetNumbers=function(e){var t=this.state.recordData,r=[];e&&e.length>0&&(r=e.map(function(e){return{fieldDesc:e,value:t[e.value]}})),this.setState({targetNumbers:r})},u.loadData=function(){var e=i(s().mark(function e(){var t,r,n,o,i,a,u;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,r=t.entityApiKey,n=t.selectFieldDesc,this.setState({loading:!0,error:null}),e.prev=1,e.next=2,c.xObject.get(r);case 2:(o=e.sent)&&o.status?(i=o.data||{},a=[],n&&n.length>0&&(a=n.map(function(e){return{fieldDesc:e,value:i[e.value]}})),this.setState({recordData:i,targetNumbers:a,loading:!1})):this.setState({recordData:{},error:(null==o?void 0:o.msg)||"获取数据失败",loading:!1}),e.next=4;break;case 3:e.prev=3,u=e.catch(1),this.setState({recordData:{},error:u.message||"获取数据失败",loading:!1});case 4:case"end":return e.stop()}},e,this,[[1,3]])}));return function(){return e.apply(this,arguments)}}(),u.formatValue=function(e,t){var r=this.props.formatter;if(null==e)return"-";if(r)return r(e,t);if(t&&("number"===t.type||"currency"===t.type)){var n=Number(e);if(!isNaN(n))return n.toLocaleString("zh-CN")}return String(e)},u.render=function(){var e,r,n=this,o=this.state,i=o.targetNumbers,a=o.loading,u=o.error,s=this.props,c=s.className,f=s.targetNumberStyle,p=void 0===f?{}:f;console.log("TargetNumber:",this.props);var d=p.baseStyle,v=void 0===d?{}:d,y=p.layoutStyle,m=void 0===y?{}:y,h=p.titleStyle,b=void 0===h?{}:h,g=p.numberStyle,x=void 0===g?{}:g,_=p.numberTitleStyle,S=void 0===_?{}:_,N=(null==m?void 0:m.alignClass)||"flex-col";"horizontal"===N&&(N="flex-col");var j={backgroundColor:(null==v?void 0:v.backgroundColor)||"#ffffff"},w=(null==v?void 0:v.paddingMargin)||{},O=w.margin||"0",D=w.padding||"0",M=w.quantity||"px",E=function(e,t){return e&&"0"!==e?/\d+(px|rem|em|%)$/.test(e.trim())?e:""+e+t:"0"};j.margin=E(O,M);var T="0"===D?"16px":E(D,M);j.padding=T;var C={fontSize:null!=x&&x.fontSize?x.fontSize+"px":"32px",fontWeight:(null==x?void 0:x.fontWeight)||600,color:(null==x?void 0:x.color)||"#262626"},P={fontSize:null!=S&&S.fontSize?S.fontSize+"px":"14px",fontWeight:(null==S?void 0:S.fontWeight)||400,color:(null==S?void 0:S.color)||"#8c8c8c"},k=!0===(null==b?void 0:b.show),A={fontSize:null!=(null==b?void 0:b.fontSize)?b.fontSize+"px":"24px",fontWeight:null!==(e=null==b?void 0:b.fontWeight)&&void 0!==e?e:400,color:(null==b?void 0:b.color)||"#000000"};return l.createElement("div",{"data-scope":"targetNumber__c",className:"targetNumber__c "+(c||""),style:j},k&&""!==(null!==(r=null==b?void 0:b.text)&&void 0!==r?r:"")&&l.createElement("div",{className:"target-number-title",style:A},null==b?void 0:b.text),l.createElement("div",{className:"target-number-block multiple-fields"},a?l.createElement("div",{className:"target-number-loading"},"加载中..."):u?l.createElement("div",{className:"target-number-error"},u):i.length>0?l.createElement("div",{className:"target-number-list"},i.map(function(e,r){return function(e,r){var o,i=(null===(o=e.fieldDesc)||void 0===o?void 0:o.label)||"数值指标",a=n.formatValue(e.value,e.fieldDesc),u=null==x?void 0:x.linkHref,s=u?l.createElement("a",{href:u,style:t({},C,{textDecoration:"none"})},a):a,c=null==S?void 0:S.linkHref,f=c?l.createElement("a",{href:c,style:t({},P,{textDecoration:"none"})},i):i;return l.createElement("div",{"data-scope":"targetNumber__c",key:r,className:"target-number-item "+N},l.createElement("div",{className:"target-number-value",style:C},s),l.createElement("div",{className:"target-number-label",style:P},f))}(e,r)})):l.createElement("div",{className:"target-number-empty"},"暂无数据")))},r}(f.BaseCmp));!function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);i>3&&a&&Object.defineProperty(t,r,a)}([f.NeoEvent.function],p.prototype,"loadData",null)}(),o}()},"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.NeoBIComponent=t():this.NeoBIComponent=t()}(window.neoRequire)}();